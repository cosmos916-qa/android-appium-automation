package com.example.appium_android_automation.infra;

/**
 * 테스트 환경 설정 중앙 관리소
 *
 * 이 파일은 자동화 테스트의 "설정판"입니다.
 * 마치 설정 메뉴처럼, 여기서 모든 기준값들을 한 번에 관리합니다.
 *
 * 🎯 주요 역할:
 * - 서버 주소, 앱 정보 등 연결 설정 관리
 * - 타임아웃(대기 시간) 기준 설정 → "언제까지 기다려줄 것인가"
 * - 이미지 매칭용 참조 파일 경로 관리
 * - 테스트 실패 기준 조정을 위한 중앙 제어점
 *
 * 💡 QA 테스터를 위한 가이드:
 * - "테스트가 너무 빨리 실패해요" → 해당 타임아웃 값 증가
 * - "테스트가 너무 오래 걸려요" → 타임아웃 값 감소
 * - "이미지 인식이 안 돼요" → 리소스 파일 경로 확인
 *
 * ⚠️ 주의사항:
 * 이 파일의 값 변경 시 모든 테스트에 영향을 줍니다.
 * 변경 후 반드시 전체 테스트 실행으로 검증하세요.
 *
 */
public class AppiumConfig {

    // ========================================
    // 🔗 Appium 서버 및 대상 앱 연결 정보
    // ========================================

    /**
     * Appium 서버 접속 주소
     *
     * 스마트폰을 제어하는 "중계 서버"의 위치입니다.
     * - 127.0.0.1 = 내 컴퓨터 (localhost)
     * - 4723 = Appium 기본 포트
     *
     * 변경이 필요한 경우:
     * - 다른 컴퓨터에서 Appium 실행 시 → 해당 IP 주소로 변경
     * - 포트 충돌 발생 시 → 다른 포트 번호로 변경
     */
    public static final String SERVER_URL = "http://127.0.0.1:4723";
    /**
     * 앱의 고유 식별 번호 (패키지명)
     *
     * 안드로이드에서 앱을 구분하는 "주민등록번호" 같은 역할입니다.
     * StartAppFlow에서 이 값으로 게임을 실행하고,
     * 테스트 중 현재 실행 중인 앱이 맞는지 확인할 때 사용합니다.
     */
    public static final String APP_PACKAGE = "com.epidgames.trickcalrevive";
    /**
     * 게임 시작 시 첫 화면의 기술적 이름
     *
     * Unity 게임이 Firebase 메시징을 사용하기 때문에
     * 이런 긴 이름의 Activity로 시작됩니다.
     * 게임 업데이트로 시작 화면이 바뀌지 않는 한 수정할 일은 없습니다.
     */
    public static final String APP_ACTIVITY = "com.google.firebase.MessagingUnityPlayerActivity";

    // ========================================
    // ⏰ 대기 시간 설정 (테스트 인내심 한계치)
    // ========================================

    /**
     * 메인 화면 로고 검증 최대 대기 시간 (30초)
     *
     * 앱 실행 시 다음과 같은 요소들로 인해 로딩이 길어집니다:
     * - 초기 리소스 다운로드
     * - 서버 연결 및 패치 확인
     * - 저사양 기기에서의 느린 처리
     *
     * 🔧 조정 가이드:
     * - 항상 10초 내 로딩 완료 → 15초로 단축 (테스트 속도 향상)
     * - 자주 타임아웃 발생 → 40초로 연장 (실패 오판 방지)
     */
    public static final int MAIN_MARKER_TIMEOUT_SEC = 30;

    /**
     * 게임 시작 후 플레이 화면 진입 확인 대기 시간 (15초)
     *
     * "게임 시작" 버튼 터치 후 실제 조작 가능한 상태까지의 대기 시간입니다.
     * 메인 화면보다 짧은 이유: 이미 게임이 로딩된 상태이므로
     *
     * 이 시간 동안 처리되는 작업:
     * - 캐릭터 데이터 로딩
     * - 게임 맵/스테이지 준비
     * - 인트로 애니메이션 재생
     */
    public static final int GAME_START_VERIFY_TIMEOUT_SEC = 15;  // 게임 로딩 고려

    /**
     * 종료 확인 버튼 탐지 대기 시간 (10초)
     *
     * "게임 종료" 선택 시 나타나는 확인 팝업을 기다리는 시간입니다.
     * 일반적으로 팝업은 즉시 나타나지만, 게임 상태에 따라
     * (예: 자동 저장 진행 중) 약간의 지연이 있을 수 있습니다.
     */
    public static final int EXIT_BUTTON_TIMEOUT_SEC = 10;

    /**
     * 앱 종료 후 완전 종료 확인 대기 시간 (3초)
     *
     * 종료 버튼을 눌러도 앱이 즉시 꺼지지 않습니다.
     * 데이터 저장, 메모리 정리 등의 작업이 필요하기 때문입니다.
     *
     * 3000 밀리초 = 3초 후에 앱이 정말 종료되었는지 최종 확인합니다.
     *
     * ⚖️ 시간 설정 기준:
     * - 너무 짧으면: 아직 종료 중인데 "종료됨"으로 오판
     * - 너무 길면: 테스트 시간만 불필요하게 연장
     */
    public static final int EXIT_VERIFICATION_WAIT_MS = 3000;

    // ========================================
    // 📷 이미지 매칭용 참조 파일 (정답지 모음)
    // ========================================
    // Unity SurfaceView 환경에서는 버튼이나 텍스트를 직접 찾을 수 없어
    // "화면 캡처 → 미리 준비한 이미지와 비교" 방식을 사용합니다.

    /**
     * 게임 메인 화면 로고 이미지 파일
     *
     * "게임이 제대로 실행되었는가?"를 판단하는 기준 이미지입니다.
     * 컴퓨터가 실제 게임 화면을 캡처한 후 이 파일과 비교하여
     * 일치하면 "게임 실행 성공"으로 판정합니다.
     *
     * 🚨 중요: 이 파일이 없거나 경로가 틀리면 모든 테스트가 실패합니다!
     */
    public static final String TARGET_LOGO_RESOURCE = "images/target_logo.png";

    /**
     * 게임 시작 후 메뉴 화면 검증용 이미지
     *
     * "로딩을 마치고 실제 게임 메뉴에 진입했는가?"를 확인하는 이미지입니다.
     * 캐릭터 선택 버튼, 설정 아이콘 등 메뉴 화면의 특징적 요소를 담고 있습니다.
     */
    public static final String GAME_STARTED_MARKER_RESOURCE = "images/target_menu.png";

    /**
     * 게임 종료 확인 팝업의 "확인" 버튼 이미지
     *
     * "정말 종료하시겠습니까?" 팝업에서 "확인" 버튼을 찾고 터치하기 위한
     * 참조 이미지입니다.
     *
     * 활용 과정:
     * 1. 이 이미지와 매칭하여 팝업이 제대로 떴는지 확인
     * 2. 매칭된 위치를 터치하여 게임 종료 실행
     * 3. 다른 팝업(업데이트 안내 등)과 구분하는 역할
     */
    public static final String EXIT_CONFIRM_BUTTON_RESOURCE = "images/target_exit_button.png";

    // ========================================
    // 🗂️ 레거시 코드 보관소 (현재 사용 안함)
    // ========================================
    // ⚠️ 아래 좌표값들은 과거 방식으로 현재는 사용하지 않습니다.
    //
    // 왜 사용 중단했나요?
    // - 해상도별로 좌표가 달라서 갤럭시/아이폰에서 다르게 동작
    // - 현재는 TouchActionHelper에서 해상도 독립적 계산 방식 사용
    //
    // 왜 삭제하지 않고 남겨뒀나요?
    // - 이전 방식과 현재 방식 비교 테스트용
    // - 급한 상황에서 특정 기기 전용 테스트 필요 시 참고용
    // - 개발 히스토리 기록 보존

    /**
     * 캐릭터 볼 당기기 드래그 동작 좌표 (특정 해상도 기준 고정값)
     *
     * 이 좌표들은 S24U(3120 x 1440) 해상도 기준으로 측정된 절대 좌표입니다.
     * 다른 해상도 기기에서는 엉뚱한 위치를 터치하게 되므로 주의하세요.
     */
    // 드래그 시작점 (캐릭터 볼을 잡는 위치)
    public static final int CHEEK_DRAG_START_X = 1560;
    public static final int CHEEK_DRAG_START_Y = 720;

    // 드래그 끝점 (볼을 당긴 후 놓는 위치)
    public static final int CHEEK_DRAG_END_X = 936;
    public static final int CHEEK_DRAG_END_Y = 720;

    /**
     * 드래그 동작 소요 시간 (1초)
     *
     * 너무 빠르면: 게임이 드래그로 인식하지 못함
     * 너무 느리면: 부자연스러운 조작으로 게임 로직 오동작 가능
     * 1000ms = 1초는 사람 손의 자연스러운 드래그 속도를 모방한 값입니다.
     */
    public static final int CHEEK_DRAG_DURATION_MS = 1000;  // 1.0초 자연스러운 드래그

}
